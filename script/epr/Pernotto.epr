{"idRate":0,"name":"Pernotto","description":"Tariffa giornaliera","script":"const TipologiaVeicolo = {\n  AUTO_PICCOLA: 'Auto Piccola',\n  AUTO_MEDIA: 'Auto Media',\n  AUTO_GRANDE: 'Auto Grande',\n  SUV_LUSSO: 'Suv/Lusso',\n  FURGONE: 'Furgone',\n  MOTO: 'Moto',\n  SCOOTER: 'Scooter',\n};\n\nconst Tariffa1 = {\n  [TipologiaVeicolo.AUTO_PICCOLA]: parseFloat(T1_APIC),\n  [TipologiaVeicolo.AUTO_MEDIA]: parseFloat(T1_AMED),\n  [TipologiaVeicolo.AUTO_GRANDE]: parseFloat(T1_AGRA),\n  [TipologiaVeicolo.SUV_LUSSO]: parseFloat(T1_ASUV),\n  [TipologiaVeicolo.FURGONE]: parseFloat(T1_FURG),\n  [TipologiaVeicolo.MOTO]: parseFloat(T1_MOTO),\n  [TipologiaVeicolo.SCOOTER]: parseFloat(T1_SCOOT),\n};\n  \nconst Tariffa2 = {\n  [TipologiaVeicolo.AUTO_PICCOLA]: parseFloat(T2_APIC),\n  [TipologiaVeicolo.AUTO_MEDIA]: parseFloat(T2_AMED),\n  [TipologiaVeicolo.AUTO_GRANDE]: parseFloat(T2_AGRA),\n  [TipologiaVeicolo.SUV_LUSSO]: parseFloat(T2_ASUV),\n  [TipologiaVeicolo.FURGONE]: parseFloat(T2_FURG),\n  [TipologiaVeicolo.MOTO]: parseFloat(T2_MOTO),\n  [TipologiaVeicolo.SCOOTER]: parseFloat(T2_SCOOT),\n};\nconst TOLLERANZA = parseInt(TOLMIN);\n  \nfunction main(ingresso, uscita, tipologia) {\n    const ingressoTime = new Date(ingresso);\n    const uscitaTime = new Date(uscita);\n    const permanenzaMillis = uscitaTime - ingressoTime;\n    const permanenzaOre = Math.floor(permanenzaMillis / (1000 * 60 * 60));\n    const residuoMinuti = Math.ceil((permanenzaMillis % (1000 * 60 * 60)) / (1000 * 60));\n\n    const tariffaGiornaliera = Tariffa1[tipologia];\n    const tariffaOraria = Tariffa2[tipologia];\n\n    if (permanenzaOre < 24 || (permanenzaOre === 24 && residuoMinuti <= 10)) {\n        return tariffaGiornaliera;\n    }\n\n    const giorniInteri = Math.floor(permanenzaOre / 24);\n    const oreRimanenti = permanenzaOre % 24;\n\n    let costoTotale = giorniInteri * tariffaGiornaliera;\n\n    if (oreRimanenti > 0 || residuoMinuti > TOLLERANZA) {\n        const costoOreRimanenti = Math.min((oreRimanenti + (residuoMinuti > 10 ? 1 : 0)) * tariffaOraria, tariffaGiornaliera);\n        costoTotale += costoOreRimanenti;\n    }\n\n    return costoTotale;\n}","params":[{"idRateParam":0,"sorting":1,"name":"T1_APIC","label":"Pernotto Auto Piccola","value":"30.00","updated":[2025,1,14,15,39,40],"created":[2025,1,14,15,39,40]},{"idRateParam":0,"sorting":2,"name":"T1_AMED","label":"Pernotto Auto Media","value":"30.00","updated":[2025,1,14,15,40,4],"created":[2025,1,14,15,40,4]},{"idRateParam":0,"sorting":3,"name":"T1_AGRA","label":"Pernotto Auto Grande","value":"35.00","updated":[2025,1,14,15,40,37],"created":[2025,1,14,15,40,37]},{"idRateParam":0,"sorting":4,"name":"T1_ASUV","label":"Pernotto Auto Suv/Lusso","value":"35.00","updated":[2025,1,14,15,41,5],"created":[2025,1,14,15,41,5]},{"idRateParam":0,"sorting":5,"name":"T1_FURG","label":"Pernotto Furgone","value":"40.00","updated":[2025,1,14,15,41,29],"created":[2025,1,14,15,41,29]},{"idRateParam":0,"sorting":6,"name":"T1_MOTO","label":"Pernotto Moto","value":"30.00","updated":[2025,1,14,15,41,51],"created":[2025,1,14,15,41,51]},{"idRateParam":0,"sorting":7,"name":"T1_SCOOT","label":"Pernotto Scooter","value":"30.00","updated":[2025,1,14,15,42,14],"created":[2025,1,14,15,42,14]},{"idRateParam":0,"sorting":8,"name":"T2_APIC","label":"Oraria Auto Piccola","value":"3.00","updated":[2025,1,14,15,43,1],"created":[2025,1,14,15,43,1]},{"idRateParam":0,"sorting":9,"name":"T2_AMED","label":"Oraria Auto Media","value":"4.00","updated":[2025,1,14,15,43,35],"created":[2025,1,14,15,43,35]},{"idRateParam":0,"sorting":10,"name":"T2_AGRA","label":"Oraria Auto Grande","value":"4.50","updated":[2025,1,14,15,44],"created":[2025,1,14,15,44]},{"idRateParam":0,"sorting":11,"name":"T2_ASUV","label":"Oraria Suv/Lusso","value":"6.00","updated":[2025,1,14,15,44,30],"created":[2025,1,14,15,44,30]},{"idRateParam":0,"sorting":12,"name":"T2_FURG","label":"Orario Furgone","value":"7.00","updated":[2025,1,14,15,44,50],"created":[2025,1,14,15,44,50]},{"idRateParam":0,"sorting":13,"name":"T2_MOTO","label":"Orario Moto","value":"3.00","updated":[2025,1,14,15,45,7],"created":[2025,1,14,15,45,7]},{"idRateParam":0,"sorting":14,"name":"T2_SCOOT","label":"Orario Scooter","value":"3.00","updated":[2025,1,14,15,45,30],"created":[2025,1,14,15,45,30]},{"idRateParam":0,"sorting":15,"name":"TOLMIN","label":"Tolleranza Minuti","value":"10","updated":[2025,1,14,16,4,9],"created":[2025,1,14,16,4,9]}],"updated":[2025,1,15,10,17,35],"created":[2025,1,15,10,17,35],"default":false}